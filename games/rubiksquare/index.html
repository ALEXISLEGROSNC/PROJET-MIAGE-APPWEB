<html lang="fr">

<head>
    <title>DOMGame</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/game.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/utils.css">
    <link rel="stylesheet" href="css/animation.css">
    <script type="module" src="js/init.js"></script>
    <script src="../../public/js/com/scores.js"></script>   <!-- Scores manager -->
    <script src="../../public/js/com/auth.js"></script>   <!-- Authentication manager -->
    
</head>

<body class="gradient-bg font-montserrat NoSpace">
    <script>
        if(AuthenticationManager.isLoggedIn()){
            console.log('User is logged in');
        } else {
            window.location.href='../../auth.html'
        }
    </script>
    <section id="TitleContainer" class="">
        <h1>ðŸ§Š Rubikâ€™s Square</h1>
    </section>
    <section id="GameContainer" class="NoSpace"> <!-- JEU ICI -->
        <div id="grille">
            <!-- GRILLE 5x5 -->
        </div>
            
        <div id="infos">
            
            <div id="infosText">Niveau : 1, Mouvements : 0, Temps : 0s</div>
            <div id="score">Score : 0</div>
            <div id="bestScore">Best Score : 0</div>
            
            <button id="resetButton">Reset</button>
            <button class="exit-button" 
            href="../../index.html"
            onclick="OnExit();"
            >Exit</button>
        </div>

    </section>
    <div></div>
</body>
<script>
    function OnExit(){
        let username = AuthenticationManager.getUsername();
        let score = window.USERSCORE;
        ScoreManager.store(
            username,
            window.USERSCORE, // in init script
            'rubiks' // gameName
        );
        alert("Nouveau score enregistrÃ© pour " + username + " ! -> "+ score)
        window.location.href='../../index.html'
    }
</script>
</html>